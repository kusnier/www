<div class="content-header">
  <h1>ğŸ” JWT Decoder</h1>
</div>

<mat-divider></mat-divider>

<textarea
  mat-textarea
  placeholder="FÃ¼ge hier dein JWT ein..."
  [value]="jwtInput()"
  (input)="jwtInput.set($any($event.target).value)"
  rows="5"
  class="input-area"
></textarea>

@if (decoded()) {
  <div class="result">
    @if (decoded()?.error) {
      <div class="error">{{ decoded()?.error }}</div>
    }

    @if (!decoded()?.error) {
      <div class="status" [class.invalid]="!decoded()?.valid">
        <strong>Status:</strong>
        {{ decoded()?.valid ? 'âœ… GÃ¼ltig' : 'âŒ Abgelaufen' }}
      </div>

      @if (expirationDate()) {
        <div class="expiration">
          <strong>Ablaufzeit:</strong> {{ expirationDate() }}
          <br>
          <small>(lÃ¤uft ab in {{ timeRemaining() }})</small>
        </div>
      }

      <mat-divider></mat-divider>

      <div class="section">
        <div class="header">
          <h3>Header</h3>
          <button (click)="copy(formatJson(decoded()?.header), 'header')">
            {{ copied() === 'header' ? 'âœ… Kopiert' : 'ğŸ“‹ Copy' }}
          </button>
        </div>
        <pre [innerHTML]="highlightJson(decoded()?.header)"></pre>
      </div>

      <div class="section">
        <div class="header">
          <h3>Payload</h3>
          <button (click)="copy(formatJson(decoded()?.payload), 'payload')">
            {{ copied() === 'payload' ? 'âœ… Kopiert' : 'ğŸ“‹ Copy' }}
          </button>
        </div>
        <pre [innerHTML]="highlightJson(decoded()?.payload)"></pre>
      </div>

      <div class="section">
        <div class="header">
          <h3>Signature</h3>
          <button (click)="copy(decoded()?.signature!, 'signature')">
            {{ copied() === 'signature' ? 'âœ… Kopiert' : 'ğŸ“‹ Copy' }}
          </button>
        </div>
        <pre>{{ decoded()?.signature }}</pre>
      </div>
    }
  </div>
}
