<div class="content-header">
  <h1>ğŸ” JWT Decoder</h1>
</div>

<mat-divider></mat-divider>

<mat-form-field appearance="outline" class="full-width input-area">
  <mat-label>FÃ¼ge dein JWT ein</mat-label>
  <textarea
    matInput
    rows="5"
    placeholder="Header.Payload.Signature"
    [value]="jwtInput()"
    (input)="jwtInput.set($any($event.target).value)">
  </textarea>
</mat-form-field>

@if (decoded()) {
  <div class="result">
    @if (decoded()?.error) {
      <mat-card class="error-card">
        <mat-icon color="warn">error</mat-icon>
        {{ decoded()?.error }}
      </mat-card>
    }

    @if (!decoded()?.error) {
      <div class="status" [class.invalid]="!decoded()?.valid">
        <strong>Status:</strong>
        {{ decoded()?.valid ? 'âœ… GÃ¼ltig' : 'âŒ Abgelaufen' }}
      </div>

      @if (expirationDate()) {
        <div>
          <strong>Ablaufzeit:</strong> {{ expirationDate() }}
          <br>
          <small>({{ timeRemaining() }})</small>
        </div>
      }

      <mat-card class="section">
        <div class="header">
          <h3>Header</h3>
          <button mat-stroked-button (click)="copy(formatJson(decoded()?.header), 'header')">
            {{ copied() === 'header' ? 'âœ…' : 'ğŸ“‹ Copy' }}
          </button>
        </div>
        <pre [innerHTML]="highlightJson(decoded()?.header)"></pre>
      </mat-card>

      <mat-card class="section">
        <div class="header">
          <h3>Payload</h3>
          <button mat-stroked-button (click)="copy(formatJson(decoded()?.payload), 'payload')">
            {{ copied() === 'payload' ? 'âœ…' : 'ğŸ“‹ Copy' }}
          </button>
        </div>
        <pre [innerHTML]="highlightJson(decoded()?.payload)"></pre>
      </mat-card>

      <mat-card class="section">
        <div class="header">
          <h3>Signature</h3>
          <button mat-stroked-button (click)="copy(decoded()?.signature!, 'signature')">
            {{ copied() === 'signature' ? 'âœ…' : 'ğŸ“‹ Copy' }}
          </button>
        </div>
        <pre>{{ decoded()?.signature }}</pre>
      </mat-card>
    }
  </div>
}
