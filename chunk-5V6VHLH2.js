import{Ab as a,Bb as g,Cb as C,Ha as c,Lb as J,Mb as S,Pa as b,aa as f,ab as u,ba as E,bb as _,cc as M,gb as r,hb as t,ja as w,jb as h,kb as y,mb as x,nb as s,yb as D}from"./chunk-LE3RS5IT.js";function T(l,n){if(l&1&&(r(0,"div",4),a(1),t()),l&2){let e,d=s(2);c(),g((e=d.decoded())==null?null:e.error)}}function I(l,n){if(l&1&&(r(0,"div")(1,"strong"),a(2,"Ablaufzeit:"),t(),a(3),t()),l&2){let e=s(3);c(3),C(" ",e.expirationDate()," ")}}function j(l,n){if(l&1){let e=h();r(0,"div",5)(1,"strong"),a(2,"Status:"),t(),a(3),t(),u(4,I,4,1,"div"),r(5,"div",6)(6,"div",7)(7,"h3"),a(8,"Header"),t(),r(9,"button",8),x("click",function(){let o;f(e);let i=s(2);return E(i.copy(i.formatJson((o=i.decoded())==null?null:o.header)))}),a(10,"Copy"),t()(),r(11,"pre"),a(12),t()(),r(13,"div",6)(14,"div",7)(15,"h3"),a(16,"Payload"),t(),r(17,"button",8),x("click",function(){let o;f(e);let i=s(2);return E(i.copy(i.formatJson((o=i.decoded())==null?null:o.payload)))}),a(18,"Copy"),t()(),r(19,"pre"),a(20),t()(),r(21,"div",6)(22,"div",7)(23,"h3"),a(24,"Signature"),t(),r(25,"button",8),x("click",function(){let o;f(e);let i=s(2);return E(i.copy((o=i.decoded())==null?null:o.signature))}),a(26,"Copy"),t()(),r(27,"pre"),a(28),t()()}if(l&2){let e,d,o,i,p,m=s(2);D("invalid",!((e=m.decoded())!=null&&e.valid)),c(3),C(" ",(d=m.decoded())!=null&&d.valid?"\u2705 G\xFCltig":"\u274C Abgelaufen"," "),c(),_(m.expirationDate()?4:-1),c(8),g(m.formatJson((o=m.decoded())==null?null:o.header)),c(8),g(m.formatJson((i=m.decoded())==null?null:i.payload)),c(8),g((p=m.decoded())==null?null:p.signature)}}function k(l,n){if(l&1&&(r(0,"div",3),u(1,T,2,1,"div",4),u(2,j,29,7),t()),l&2){let e,d,o=s();c(),_((e=o.decoded())!=null&&e.error?1:-1),c(),_((d=o.decoded())!=null&&d.error?-1:2)}}var O=class l{jwtInput=w("");decoded=w(null);constructor(){S(()=>{let n=this.jwtInput();this.decodeJwt(n)})}decodeJwt(n){if(!n||!n.includes(".")){this.decoded.set(null);return}try{let[e,d,o]=n.split("."),i=JSON.parse(atob(e)),p=JSON.parse(atob(d)),m=Math.floor(Date.now()/1e3),v=p.exp,P=!v||v>m;this.decoded.set({header:i,payload:p,signature:o,valid:P})}catch{this.decoded.set({error:"Ung\xFCltiges JWT-Format"})}}formatJson(n){return JSON.stringify(n,null,2)}copy(n){navigator.clipboard.writeText(n)}expirationDate=J(()=>{let n=this.decoded()?.payload;return n?.exp?new Date(n.exp*1e3).toLocaleString():null});static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-jwt-decoder"]],decls:5,vars:2,consts:[[1,"container"],[1,"title"],["placeholder","F\xFCge hier dein JWT ein...","rows","5",1,"input-area",3,"input","value"],[1,"result"],[1,"error"],[1,"status"],[1,"section"],[1,"header"],[3,"click"]],template:function(e,d){e&1&&(r(0,"div",0)(1,"h2",1),a(2,"JWT Decoder"),t(),r(3,"textarea",2),x("input",function(i){return d.jwtInput.set(i.target.value)}),t(),u(4,k,3,2,"div",3),t()),e&2&&(c(3),y("value",d.jwtInput()),c(),_(d.decoded()?4:-1))},dependencies:[M],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:1rem;display:flex;flex-direction:column;gap:1.5rem}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;text-align:center}.input-area[_ngcontent-%COMP%]{width:100%;font-family:monospace;border:1px solid #ccc;border-radius:8px;padding:.75rem;resize:vertical;font-size:.95rem}.result[_ngcontent-%COMP%]{background:#fafafa;border-radius:12px;padding:1rem;box-shadow:0 1px 3px #0000001a}.error[_ngcontent-%COMP%]{color:#b00020;font-weight:600;text-align:center}.status[_ngcontent-%COMP%]{font-weight:600;color:#0a0}.status.invalid[_ngcontent-%COMP%]{color:#b00020}.expiration[_ngcontent-%COMP%]{margin:.5rem 0 1rem}.section[_ngcontent-%COMP%]{margin-top:1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}button[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;border-radius:6px;padding:.25rem .75rem;cursor:pointer;transition:background .2s}button[_ngcontent-%COMP%]:hover{background:#0056b3}pre[_ngcontent-%COMP%]{background:#f0f0f0;padding:.5rem;border-radius:6px;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word}"]})};export{O as JwtDecoder};
